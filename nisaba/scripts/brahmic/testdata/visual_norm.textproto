# Copyright 2025 Nisaba Authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# proto-file: third_party/nisaba/interim/testing/testdata.proto
# proto-message: Rewrites

# Tests with legacy Chillu encoding, using Zero Width Joiner(ZWJ)
rewrite { rule: "MLYM" input: "р┤Жр┤ир╡НтАНр┤бр╡Н" output: "р┤Жр╡╗р┤бр╡Н" }
rewrite { rule: "MLYM" input: "р┤╣р╡Ир┤лр┤ир╡НтАН" output: "р┤╣р╡Ир┤лр╡╗" }

# Tests with Zero Width Non-Joiner(ZWNJ)
rewrite { rule: "MLYM" input: "р┤Хр╡Жр┤Ьр╡НтАМр┤░р┤┐р┤╡р┤╛р╡╛" output: "р┤Хр╡Жр┤Ьр╡НтАМр┤░р┤┐р┤╡р┤╛р╡╛" }
rewrite { rule: "MLYM" input: "р┤╕р┤жр╡НтАМр┤╡р┤╛р┤░р┤В" output: "р┤╕р┤жр╡НтАМр┤╡р┤╛р┤░р┤В" }
rewrite { rule: "MLYM" input: "тАМр┤╕р╡Нр┤кр╡БтАМр┤Яр╡Нр┤ир┤┐р┤Хр╡НтАМ" output: "р┤╕р╡Нр┤кр╡Бр┤Яр╡Нр┤ир┤┐р┤Хр╡Н" }
rewrite { rule: "MLYM" input: "р┤Ер┤▒р┤мр╡НтАМр┤мр┤╕р┤╛р╡╝" output: "р┤Ер┤▒р┤мр╡НтАМр┤мр┤╕р┤╛р╡╝" }

# Tests with Zero Width Space(ZWS) and ZWNJ
rewrite { rule: "MLYM" input: "тАЛр┤Жр╡╗р┤бр╡НтАМ" output: "р┤Жр╡╗р┤бр╡Н" }

rewrite { rule: "SINH" input: "р╖Бр╖КтАНр╢╗р╖УтАЛр╢╜р╢ВтАМр╢Ър╖ПтАН" output: "р╖Бр╖КтАНр╢╗р╖Ур╢╜р╢Вр╢Ър╖П" }

rewrite { rule: "SINH" input: "р╢Кр╖БтАНр╖КтАНр╢╗р╖Пр╢║р╢╜" output: "р╢Кр╖Бр╖КтАНр╢╗р╖Пр╢║р╢╜" }
rewrite { rule: "SINH" input: "р╢╢р╖ТтАНр╖КтАНр╢╗р╢нр╖Пр╢▒р╖КтАНр╢║р╢║р╖Ъ" output: "р╢╢р╖КтАНр╢╗р╖Тр╢нр╖Пр╢▒р╖КтАНр╢║р╢║р╖Ъ" }
rewrite { rule: "SINH" input: "р╢╕р╢▒р╖Кр╢нр╖УтАНр╖КтАНр╢╗" output: "р╢╕р╢▒р╖Кр╢нр╖КтАНр╢╗р╖У" }
rewrite { rule: "SINH" input: "р╢Ер╢┤р╖ЪтАНр╖КтАНр╢╗р╢╜р╖К" output: "р╢Ер╢┤р╖КтАНр╢╗р╖Ър╢╜р╖К" }

# TODO: Currently, тАШpreserveтАЩ is only available when the listed sequence
# is sandwiched between two consonants. However, in Tamil, only a few clusters
# require preserving <VIRAMA, ZWNJ>, such as the K-SSA cluster. Unfortunately,
# this is not possible to represent in Nisaba today. As a result, <VIRAMA, ZWNJ>
# is unnecessarily preserved in all consonant contexts. After such a
# specialization is implemented, please include the following test:
# rewrite { rule: "TAML" input: "родрооро┐тАЛро┤ро░рпНтАМроХро│рпНтАН" output: "родрооро┐ро┤ро░рпНроХро│рпН" }
rewrite { rule: "TAML" input: "роЖроХрпНтАМро╖ройрпН" output: "роЖроХрпНтАМро╖ройрпН" }

rewrite { rule: "TAML" input: "роХро╛рпЖро│рпН" output: "роХрпКро│рпН" }
rewrite { rule: "TAML" input: "рокрпНро░ро╛рпЗро╖ройрпН" output: "рокрпНро░рпЛро╖ройрпН" }
rewrite { rule: "TAML" input: "роЪрпЧрпЖроирпНродро░рпНропроорпН" output: "роЪрпМроирпНродро░рпНропроорпН" }

rewrite { rule: "DEVA" input: "рд╢реНрд░реАрдорд╛рдиреНтАМрдХреЛ" output: "рд╢реНрд░реАрдорд╛рдиреНтАМрдХреЛ" }
rewrite { rule: "DEVA" input: "рдЧреЛрд▓реНтАНрдбрдмрд░реНрдЧ" output: "рдЧреЛрд▓реНрдбрдмрд░реНрдЧ" }

# <VIRAMA, NUKTA> тЖТ <NUKTA, VIRAMA>
rewrite { rule: "DEVA" input: "рдХреНрд╝рд▓рдм" output: "рдХрд╝реНрд▓рдм" }

# <LETTER E, VOWEL SIGN E> тЖТ <LETTER AI>
rewrite { rule: "DEVA" input: "рдПреЗрд░рд╛рд╡рдд" output: "рдРрд░рд╛рд╡рдд" }

# <LETTER AA, VOWEL SIGN E> тЖТ <LETTER O>
rewrite { rule: "DEVA" input: "рд╕рдВрд╕реНрдерд╛рдЖреЗрдВ" output: "рд╕рдВрд╕реНрдерд╛рдУрдВ" }
# <LETTER A, VOWEL SIGN AA, VOWEL SIGN E> тЖТ <LETTER O>
rewrite { rule: "DEVA" input: "рд╕рдВрд╕реНрдерд╛рдЕрд╛реЗрдВ" output: "рд╕рдВрд╕реНрдерд╛рдУрдВ" }

# <VOWEL SIGN AA, VOWEL SIGN E> тЖТ <VOWEL SIGN O>
rewrite { rule: "DEVA" input: "рдмрд╛реЗрд▓рдиреЗ" output: "рдмреЛрд▓рдиреЗ" }

# Eyelash reph
rewrite { rule: "DEVA" input: "рджрд░реНтАНрдпрд╛" output: "рджрд▒реНрдпрд╛" }

## Examples from mr_in translit data ##

# <VOWEL A, ZWJ?, VOWEL SIGN CANDRA E> тЖТ <VOWEL CANDRA A>
rewrite { rule: "DEVA" input: "рд╡реНрд╣реЙрдЯреНрд╕рдЕреЕрдкрд╡рд░" output: "рд╡реНрд╣реЙрдЯреНрд╕ре▓рдкрд╡рд░" }
rewrite { rule: "DEVA" input: "рд╡реНрд╣реЙрдЯреНрд╕рдЕтАНреЕрдкрд╡рд░" output: "рд╡реНрд╣реЙрдЯреНрд╕ре▓рдкрд╡рд░" }

# <LETTER A, VOWEL SIGN CANDRA E, SIGN ANUSVARA> тЖТ <LETTER A, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдЕреЕрдВрдбреА" output: "рдЕрдБрдбреА" }

## <VOWEL SIGN CANDRA O, SIGN ANUSVARA> тЖТ <VOWEL SIGN AA, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдмреЙрдВрдм" output: "рдмрд╛рдБрдм" }

## <VOWEL SIGN CANDRA O, SIGN CANDRABINDU> тЖТ <VOWEL SIGN AA, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдХреЙрдБрдЧреНрд░реЗрд╕рдЪреЗ" output: "рдХрд╛рдБрдЧреНрд░реЗрд╕рдЪреЗ" }

## Examples from hi_in translit data ##

# <VOWEL A, VOWEL SIGN AA> тЖТ <VOWEL AA>
# <VOWEL SIGN AA, VOWEL SIGN E> тЖТ <VOWEL SIGN O>
rewrite { rule: "DEVA" input: "рдЕрд╛рдпрд╛реЗрдЬрди" output: "рдЖрдпреЛрдЬрди" }

# <LETTER A, VOWEL SIGN CANDRA O> тЖТ <LETTER CANDRA O>
rewrite { rule: "DEVA" input: "рдЕреЙрдирд▓рд╛рдЗрди" output: "рдСрдирд▓рд╛рдЗрди" }

# <LETTER A, VOWEL SIGN O> тЖТ <LETTER O>
rewrite { rule: "DEVA" input: "рд╢рд╛рдЕреЛрдореА" output: "рд╢рд╛рдУрдореА" }

# <LETTER A, VOWEL SIGN AU> тЖТ <LETTER AU>
rewrite { rule: "DEVA" input: "рдЕреМрд░" output: "рдФрд░" }

# <VOWEL SIGN AA, VOWEL SIGN CANDRA E> тЖТ <VOWEL SIGN CANDRA O>
rewrite { rule: "DEVA" input: "рдкрд╛реЕрдЬрд┐рдЯрд┐рд╡" output: "рдкреЙрдЬрд┐рдЯрд┐рд╡" }

# <VOWEL SIGN AA, VOWEL SIGN AI> тЖТ <VOWEL SIGN AU>
rewrite { rule: "DEVA" input: "рджрд╛реИрд░рд╛рди" output: "рджреМрд░рд╛рди" }

# <LETTER E, VOWEL SIGN CANDRA E> тЖТ <VOWEL SIGN CANDRA E>
rewrite { rule: "DEVA" input: "рдПреЕрдк" output: "рдНрдк" }

# <LETTER E, VOWEL SIGN E> тЖТ <LETTER AI>
rewrite { rule: "DEVA" input: "рдПреЗрд╢реНрд╡рд░реНрдпрд╛" output: "рдРрд╢реНрд╡рд░реНрдпрд╛" }

# <LETTER AA, VOWEL SIGN CANDRA E> тЖТ <LETTER CANDRA O>
rewrite { rule: "DEVA" input: "рдЖреЕрдЯреЛрдореЛрдмрд╛рдЗрд▓" output: "рдСрдЯреЛрдореЛрдмрд╛рдЗрд▓" }

# <LETTER AA, VOWEL SIGN E> тЖТ <LETTER O>
# <LETTER R, VIRAMA, LETTER I> тЖТ <LETTER II>
rewrite { rule: "DEVA" input: "рдЖрд░реНрдЗрдЖреЗрдПрд╕" output: "рдЖрдИрдУрдПрд╕" }

# <LETTER AA, VOWEL SIGN AI> тЖТ <LETTER AU>
rewrite { rule: "DEVA" input: "рдЖреИрд╕рдд" output: "рдФрд╕рдд" }

# <VOWEL SIGN CANDRA E, SIGN ANUSVARA> тЖТ <SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдмреЕрдВрдХреЗрдЪреНрдпрд╛" output: "рдмрдБрдХреЗрдЪреНрдпрд╛" }

# <VOWEL SIGN CANDRA O, SIGN ANUSVARA> тЖТ <VOWEL SIGN AA, SIGN CANDRABINDU>
# TODO: Uncomment this when/if visual_norm_utf8 supports hyphens.
# rewrite { rule: "DEVA" input: "рд╕реАрдореЗрдВрдЯ-рдХреЙрдВрдХреНрд░реАрдЯ" output: "рд╕реАрдореЗрдВрдЯ-рдХрд╛рдБрдХреНрд░реАрдЯ" }

# <LETTER CANDRA O, SIGN ANUSVARA> тЖТ <LETTER AA, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдСрдВрдЦреЗрдВ" output: "рдЖрдБрдЦреЗрдВ" }
rewrite { rule: "DEVA" input: "рдСрдВрдХреЛрд▓реЙрдЬрд┐рд╕реНрдЯ" output: "рдЖрдБрдХреЛрд▓реЙрдЬрд┐рд╕реНрдЯ" }

# <VOWEL SIGN A, VOWEL SIGN CANDRA E, SIGN ANUSVARA> тЖТ <VOWEL SIGN AA, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдХрд╛реЕрдВрдкреНрд▓реЗрдХреНрд╕" output: "рдХрд╛рдБрдкреНрд▓реЗрдХреНрд╕" }

# Ref: Unicode Standard Version 12.0: Chapter 12.1: Table 12-3
rewrite { rule: "DEVA" input: "рдХреНрдЪреНрд╛" output: "рдХреНрдЪ" }
rewrite { rule: "DEVA" input: "рдХреНрдЪреНтАНрд╛" output: "рдХреНрдЪ" }
rewrite { rule: "DEVA" input: "рдХреНрд╖реНрд╛" output: "рдХреНрд╖" }
rewrite { rule: "DEVA" input: "рдХреНрд╖реНтАНрд╛" output: "рдХреНрд╖" }
rewrite { rule: "DEVA" input: "рддреНрддреНрд╛" output: "рддреНрдд" }
rewrite { rule: "DEVA" input: "рддреНрддреНтАНрд╛" output: "рддреНрдд" }
rewrite { rule: "DEVA" input: "рдиреНрддреНрд╛" output: "рдиреНрдд" }
rewrite { rule: "DEVA" input: "рдиреНрддреНтАНрд╛" output: "рдиреНрдд" }

rewrite { rule: "BENG" input: "ржЕрзНржпрж╛ржб" output: "ржЕрзНржпрж╛ржб" }
rewrite { rule: "BENG" input: "ржПрзНржпрж╛рж▓ржЬрж┐ржУ" output: "ржПрзНржпрж╛рж▓ржЬрж┐ржУ" }

# Ya-phalaa/sign
# <RA, ZWNJ, VIRAMA, YA> тЖТ <RA, ZWJ, VIRAMA, YA>
rewrite { rule: "BENG" input: "рж░тАМрзНржпрж╛рж▓" output: "рж░тАНрзНржпрж╛рж▓" }
# ZWJ in <RA, ZWNJ, VIRAMA, YA> is preserved.
rewrite { rule: "BENG" input: "рж░тАНрзНржпрж╛рж▓" output: "рж░тАНрзНржпрж╛рж▓" }
rewrite { rule: "KNDA" input: "р▓░тАНр│Нр▓пр▓Вр▓бр│Н" output: "р▓░тАНр│Нр▓пр▓Вр▓бр│Н" }

# TODO: Drop ZWJ for YA-phalaa after KA.
# rewrite { rule: rule: "BENG" input: "ржХтАНрзНржпрж╛рж╢" output: "ржХрзНржпрж╛рж╢" }
# rewrite { rule: rule: "KNDA" input: "р▓ХтАНр│Нр▓пр▓╛р▓Вр▓бр│Н" output: "р▓Хр│Нр▓пр▓╛р▓Вр▓бр│Н" }

# Reordering of Vowel signs equivalences in NFC
rewrite { rule: "BENG" input: "ржХрз░рж╛рзЗрждрж╛" output: "ржХрз░рзЛрждрж╛" }

# De-duplicate overlapping signs
rewrite { rule: "DEVA" input: "реБреБ" output: "реБ" }
rewrite { rule: "DEVA" input: "реВреВ" output: "реВ" }
rewrite { rule: "DEVA" input: "реГреГ" output: "реГ" }
rewrite { rule: "DEVA" input: "реЗреЗ" output: "реЗ" }
rewrite { rule: "DEVA" input: "реИреИ" output: "реИ" }
rewrite { rule: "DEVA" input: "рдВрдВ" output: "рдВ" }
rewrite { rule: "DEVA" input: "реЙрдВрдВ" output: "рд╛рдБ" }
rewrite { rule: "DEVA" input: "рдЕтАНтАНтАНтАНреЕ" output: "ре▓" }
# SIGN UU, SIGN UU --> SIGN UU
rewrite { rule: "DEVA" input: "рдЦреВреВрдм" output: "рдЦреВрдм" }
rewrite { rule: "DEVA" input: "рдЦреВреВрдмрд╕реВрд░рдд" output: "рдЦреВрдмрд╕реВрд░рдд" }
rewrite { rule: "DEVA" input: "рдЬрдореНрдореВреВ" output: "рдЬрдореНрдореВ" }

rewrite { rule: "GUJR" input: "рк╝рк╝" output: "рк╝" }
rewrite { rule: "GUJR" input: "рлБрлБ" output: "рлБ" }
rewrite { rule: "GUJR" input: "рлВрлВ" output: "рлВ" }
rewrite { rule: "GUJR" input: "рлГрлГ" output: "рлГ" }
rewrite { rule: "GUJR" input: "рлДрлД" output: "рлД" }
rewrite { rule: "GUJR" input: "рлЕрлЕ" output: "рлЕ" }
rewrite { rule: "GUJR" input: "рлЗрлЗ" output: "рлЗ" }
rewrite { rule: "GUJR" input: "рлИрлИ" output: "рлИ" }
rewrite { rule: "GUJR" input: "рлНрлН" output: "рлН" }

# BENG
rewrite { rule: "BENG" input: "ржБржБ" output: "ржБ" }
rewrite { rule: "BENG" input: "рж╝рж╝" output: "рж╝" }
rewrite { rule: "BENG" input: "рзБрзБ" output: "рзБ" }
rewrite { rule: "BENG" input: "рзВрзВ" output: "рзВ" }
rewrite { rule: "BENG" input: "рзГрзГ" output: "рзГ" }
rewrite { rule: "BENG" input: "рзНрзН" output: "рзН" }

rewrite { rule: "KNDA" input: "р│Жр│Ж" output: "р│Ж" }

rewrite { rule: "TELU" input: "р░мр▒Бр▒Б" output: "р░Л" }
# SIGN E, AI LENGTH MARK -> SIGN AI.
rewrite { rule: "TELU" input: "р░пр░╛р░нр▒Жр▒Ц" output: "р░пр░╛р░нр▒И" }
rewrite { rule: "TELU" input: "р░ир▒Жр▒Цр░Лр░др░┐" output: "р░ир▒Ир░Лр░др░┐" }

# Soft de-duplication:

# SIGN E, SIGN AI --> SIGN AI
rewrite { rule: "DEVA" input: "рдЬреЗреИрдХреА" output: "рдЬреИрдХреА" }
# AI, SIGN E тЖТ AI
rewrite { rule: "DEVA" input: "рдРреЗрдб" output: "рдРрдб" }
# AU, SIGN E тЖТ AU
rewrite { rule: "DEVA" input: "рдФреЗрд░" output: "рдФрд░" }
# AU, SIGN AI тЖТ AU
rewrite { rule: "DEVA" input: "рдФреИрд░" output: "рдФрд░" }
# O, SIGN E тЖТ O
# SIGN O, SIGN E тЖТ SIGN O
# SIGN AU, SIGN AI тЖТ SIGN AU
rewrite { rule: "DEVA" input: "рдЪреМреИрд╣рд╛рди" output: "рдЪреМрд╣рд╛рди" }
# TODO: Support the following for NFC composed forms like QA.
# NUKTA, NUKTA  тЖТ NUKTA
rewrite { rule: "DEVA" input: "рдЬреБрдбрд╝рд╝реЗ" output: "рдЬреБрдбрд╝реЗ" }
# AU, SIGN AI тЖТ AU
# SIGN AU, SIGN AI тЖТ SIGN AU
rewrite { rule: "DEVA" input: "рдФреИ" output: "рдФ" }
rewrite { rule: "DEVA" input: "реМреИ" output: "реМ" }
# O, SIGN E тЖТ O
# SIGN O, SIGN E тЖТ SIGN O
rewrite { rule: "DEVA" input: "рдУреЗ" output: "рдУ" }
rewrite { rule: "DEVA" input: "реЛреЗ" output: "реЛ" }
# CANDRA O, SIGN CANDRA E тЖТ CANDRA O
# SIGN CANDRA O, SIGN CANDRA E тЖТ SIGN CANDRA O
rewrite { rule: "DEVA" input: "рдСреЕ" output: "рдС" }
rewrite { rule: "DEVA" input: "реЙреЕ" output: "реЙ" }
# AI, SIGN E тЖТ AI
rewrite { rule: "DEVA" input: "рдРреЗ" output: "рдР" }
# Exceptional overlapped nuktas:
rewrite { rule: "DEVA" input: "рдЖрдирд╝рд╝реНрджрд╛" output: "рдЖрдйреНрджрд╛" }
rewrite { rule: "DEVA" input: "рдЖрд░рд╝рд╝реНрджрд╛" output: "рдЖрд▒реНрджрд╛" }
rewrite { rule: "DEVA" input: "рдЖрд│рд╝рд╝реНрджрд╛" output: "рдЖрд┤реНрджрд╛" }
rewrite { rule: "DEVA" input: "рдЖрдйрд╝реНрджрд╛" output: "рдЖрдйреНрджрд╛" }
rewrite { rule: "DEVA" input: "рдЖрд▒рд╝реНрджрд╛" output: "рдЖрд▒реНрджрд╛" }
rewrite { rule: "DEVA" input: "рдЖрд┤рд╝реНрджрд╛" output: "рдЖрд┤реНрджрд╛" }

# Malformed Ra with vocalic liquids.
rewrite { rule: "DEVA" input: "рдирд┐рд░реНрдЛрддрд┐" output: "рдирд┐рд░реГрддрд┐" }
rewrite { rule: "DEVA" input: "рдиреИрд░реНреарддрд╛рдГ" output: "рдиреИрд░реДрддрд╛рдГ" }
rewrite { rule: "DEVA" input: "рд░реНрдМ" output: "рд░рев" }
rewrite { rule: "DEVA" input: "рд░реНреб" output: "рд░рег" }

# Chillus/KHANDA TA with a preceding VIRAMA
rewrite { rule: "MLYM" input: "р┤Хр╡Жр┤пр╡Нр╡╗" output: "р┤Хр╡Жр┤пр╡Нр╡╗" }
rewrite { rule: "BENG" input: "рж░рж╛ржЗржиржлрзЗрж▓рзНрзО" output: "рж░рж╛ржЗржиржлрзЗрж▓рзНрзО" }

# No ZWNJ with KHANDA TA with a preceding VIRAMA
# TODO: Investigate if the usage of ZWJs valid in here.
# That is, if <Consonant, VIRAMA, ZW(N)J, KHANDA TA> has a valid usage,
# please change visual_norm to keep ZW(N)J for that specific usage.
# Corresponding change is needed in wellformed acceptor as well.
rewrite { rule: "BENG" input: "рж░рж╛ржЗржиржлрзЗрж▓рзНтАМрзО" output: "рж░рж╛ржЗржиржлрзЗрж▓рзНрзО" }

# Assamese RA in conjuncts becomes Bengali RA; rest of the RA\'s are unaffected
rewrite { rule: "BN" input: "рж░рз░рз░рзНржХрзНрз░рж░рзНржХрзНрж░" output: "рж░рз░рж░рзНржХрзНрж░рж░рзНржХрзНрж░" }
# <ASSAMESE RA, VIRAMA, ZWNJ> is preserved as RA is explicitly displayed.
rewrite { rule: "BN" input: "рз░рзНтАМржХрзНтАМрз░" output: "рз░рзНтАМржХрзНтАМрз░" }
# No rewrite if <ASSAMESE RA, VIRAMA> is not followed by a consonant.
rewrite { rule: "BN" input: "рз░рз░рзН" output: "рз░рз░рзН" }

# Bengali RA in conjuncts becomes Assamese RA; rest of the RA\'s are unaffected
rewrite { rule: "AS" input: "рж░рз░рж░рзНржХрзНрж░рз░рзНржХрзНрз░" output: "рж░рз░рз░рзНржХрзНрз░рз░рзНржХрзНрз░" }
# <BENGALI RA, VIRAMA, ZWNJ> is preserved as RA is explicitly displayed.
rewrite { rule: "AS" input: "рж░рзНтАМржХрзНтАМрж░" output: "рж░рзНтАМржХрзНтАМрж░" }
# No rewrite if <BENGALI RA, VIRAMA> is not followed by a consonant.
rewrite { rule: "AS" input: "рж░рж░рзН" output: "рж░рж░рзН" }

# Oriya LETTER WA mis-encoded as <LETTER O, VIRAMA, LETTER BA>
rewrite { rule: "ORYA" input: "рмУрнНрммрнЗрмм" output: "рн▒рнЗрмм" }
# Oriya LETTER WA mis-encoded as <LETTER O, VIRAMA, LETTER WA>
rewrite { rule: "ORYA" input: "рмУрнНрн▒рм╛рмЗрмлрм╛рмЗ" output: "рн▒рм╛рмЗрмлрм╛рмЗ" }

# Newa (Pracalit): <LETTER AA> misencoded as <LETTER A, VOWEL SIGN AA>.
rewrite { rule: "NEWA" input: "ЁСРАЁСР╡ЁСРйЁСР╛" output: "ЁСРБЁСРйЁСР╛" }

# Tirhuta: Table 15-5 (Section 15.10) from Unicode standard 14.0.
# ---------------------------------------------------------------
rewrite { rule: "TIRH" input: "ЁСТБЁСТ░" output: "ЁСТВ" }
rewrite { rule: "TIRH" input: "ЁСТкЁСТ╡" output: "ЁСТЙ" }
rewrite { rule: "TIRH" input: "ЁСТкЁСТ╢" output: "ЁСТК" }
rewrite { rule: "TIRH" input: "ЁСТЛЁСТ║" output: "ЁСТМ" }
rewrite { rule: "TIRH" input: "ЁСТНЁСТ║" output: "ЁСТО" }

# Takri: Table 15-1 (Section 15.4) from Unicode standard 14.0.
# ------------------------------------------------------------
rewrite { rule: "TAKR" input: "ЁСЪШЁСЪАЁСЪн" output: "ЁСЪШЁСЪБ" }
rewrite { rule: "TAKR" input: "ЁСЪРЁСЪЖЁСЪ▓" output: "ЁСЪРЁСЪЗ" }
rewrite { rule: "TAKR" input: "ЁСЪЯЁСЪАЁСЪ┤" output: "ЁСЪЯЁСЪИ" }
rewrite { rule: "TAKR" input: "ЁСЪУЁСЪАЁСЪ╡" output: "ЁСЪУЁСЪЙ" }

# Some point examples of a visually split vowel with an anusvara in the middle:
# <LETTER AA, SIGN ANUSVARA, VOWEL SIGN E> тЖТ <LETTER O, SIGN ANUSVARA>
rewrite { rule: "DEVA" input: "рдЕрдзрд┐рдХрд╛рд░рд┐рдпрд╛рдВреЗ" output: "рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЛрдВ"}
rewrite { rule: "DEVA" input: "рд╡рд╛рд▓рд╛рдВреЗ" output: "рд╡рд╛рд▓реЛрдВ"}
# <LETTER A, SIGN ANUSVARA, VOWEL SIGN CANDRA E> тЖТ <LETTER A, SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдЕрдВреЕрдбреА" output: "рдЕрдБрдбреА" }
# <SIGN ANUSVARA, VOWEL SIGN CANDRA E> тЖТ <SIGN CANDRABINDU>
rewrite { rule: "DEVA" input: "рдмрдВреЕрдХреЗрдЪреНрдпрд╛" output: "рдмрдБрдХреЗрдЪреНрдпрд╛" }

# TODO: Consider adding tests in the opposite order.
# The same but with opposite order:
# rewrite { rule: "DEVA" input: "рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЗрдВрд╛" output: "рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЛрдВ"}
# rewrite { rule: "DEVA" input: "рд╡рд╛рд▓реЗрдВрд╛" output: "рд╡рд╛рд▓реЛрдВ"}
